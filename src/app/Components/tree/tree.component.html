

<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-12 p-5">
      <div class="centered-div custom-frame">
        <div class="row">
<div class="col-9">
  <h1> Tree Building</h1>
</div>
<div class="col-3">
  <button class="btn btn-success " (click)="modalService.open(ADDNODE, { size: 'lg',centered:true }); ResetData()"> Add New Main Node</button>
</div>
        </div>
        <tree-root [nodes]="nodes" [options]="options">
          <ng-template #treeNodeTemplate let-node let-index="index">
            <span>{{ node.data.name }}</span>
             <button class="btn btn-success m-2" (click)="modalService.open(ADDNODE, { size: 'lg',centered:true });AddChild(node)"> <i class="fas fa-plus"></i></button>
             <button class="btn btn-danger m-2 " (click)="modalService.open(DeleteModal, { size: 'md',centered:true });del(node)"><i class="fas fa-minus"></i></button>
             <button class="btn btn-primary m-2 " (click)="modalService.open(ADDNODE, { size: 'lg',centered:true });save(node)"><i class="fas fa-pencil-alt"></i></button>
           </ng-template>
        </tree-root>
      </div>
    </div>
  </div>
</div>


<ng-template #ADDNODE let-modal class="col-12" >
    <div class="modal-body col-12 text-start bg-white">

      <h4 class="modal-title col-12 ">  Add Main Node </h4>
      <div class="row">
   <div class="col-12 internal-page mb-3">
    <div class="inner-box ">
      <div class="px-3 pt-3 pb-3 internal-box position-relative ">
        <div class="my-form row CreatAccount col-12" >
        <div class="col-lg-12">
          <div class="row">
            <div class="col-md-12 col-lg-12 mb-12">
              <label for="Name">  Node Name</label>
              <input [(ngModel)]="TreeItem.name" type="text" class="form-control" id="Name" >
          </div>
        </div>
</div>
<br/>
</div>
        </div>
      </div>
   </div>

   </div>
    <div class="text-center p-3 bg-white">
      <button class="btn btn-danger btn-dangerCustom mx-3 py-2 px-5" (click)="Send(ConfirmModal)"> Save </button>
      <button class="btn btn-light mx-3 py-2 px-5" (click)="modalService.dismissAll()"  > Close</button>
    </div>

    </div>

</ng-template>

<ng-template #ConfirmModal let-modal class="col-12" >
  <div class="p-4 text-center bg-white">
    <svg  width="100" height="100" fill="#dc3545" class="bi bi-exclamation-circle" viewBox="0 0 16 16">
      <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
      <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
    </svg>
  </div>

  <div class="modal-body col-12 text-start bg-white">
    <h4 class="modal-title col-12 text-danger">  {{_Apiservice.ErrorMassage}} </h4>

    <div class="text-center p-3 bg-white">
      <button class="btn btn-light mx-3 py-2 px-5" (click)="modalService.dismissAll()"  > الغاء </button>
    </div>

  </div>

</ng-template>

<ng-template #DeleteModal let-modal class="col-12" >

  <div class="p-4 text-center bg-white">
    <svg  width="100" height="100" fill="#f8bb86" class="bi bi-exclamation-circle" viewBox="0 0 16 16">
      <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
      <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
    </svg>
  </div>

    <div class="modal-body col-12 text-start bg-white">

      <h4 class="modal-title col-12 " *ngIf="TreeItem.children.length == 0">  Are You Sure </h4>
      <h4 class="modal-title col-12 " *ngIf="TreeItem.children.length != 0">  This node has children, if you delete it, these children will be deleted </h4>
    <div class="text-center p-3 bg-white">
      <button class="btn btn-danger btn-dangerCustom mx-3 py-2 px-5" (click)="Delete()"> Delete </button>
      <button class="btn btn-light mx-3 py-2 px-5" (click)="modalService.dismissAll()"  >Close </button>
    </div>

    </div>

</ng-template>





